(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{2598:function(e,t,r){"use strict";r.d(t,{J:function(){return i}});var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"album";return"https://beta.sittingonclouds.net/live/".concat(t,"/").concat(e,".png")}},3409:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return q}});var i=r(2809),n=r(6311),s=r(2209),a=r(1163),c=r(4397),l=r(3231),u=r(4051),o=r(1555),m=r(4209),d=r(4184),f=r.n(d),p=r(5675),h=r(1664),y=r(9249),b=r(8735),A=r.n(b),j=r(2598),g={src:"/_next/static/image/public/img/assets/clouds.3b07c53cb01883781c9ee33da70e7efb.png",height:1391,width:1353,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAbFBMVEVMaXH/mk3/hjThnGz9yKr/fyj/eyT/fSL9eCj/eiKMaVPyfzbdgkv+fCX+eB/9dx7/iDX9dBr/eB+xf16CZlf4upCkclB32fByV0TEurfndi3VtaZz4PH9eCH/iz36jkSNwMWHtdjkj1d7vu4GkKrcAAAAHXRSTlMA+Nj+/fn2EyGv/uwuntTq/oSO/f74/rj+/f79yYCy1AUAAAAJcEhZcwAANdMAADXTAQwhQ3cAAABGSURBVAiZBcEFAoAgEATApY+wOw5Q//9HZwDy1jYOoI6ZuXXwReRe5AHmXZWaioQ59zAHlvBGa73wiBS/63iiA9Jd60b4AYEeA9S99jztAAAAAElFTkSuQmCC"},O=r(5893);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=e.className,r=void 0===t?"":t,i=e.style,n=void 0===i?{}:i,s=e.size,a=void 0===s?150:s;return(0,O.jsx)("div",{className:f()(r,A().spin),style:v(v({},n),{},{height:a,width:a}),children:(0,O.jsx)(p.default,{layout:"responsive",height:a,width:a,alt:"loading",src:g})})}var Z,S,E=r(7294);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=30,D="query Search($title: String!, $limit: Int!, $page: Int!)",T={byTitle:{query:"searchAlbum(title: $title, limit: $limit, page: $page){ count, items: rows { id, title, classes { name }, releaseDate } }",title:"Albums",subTitle:function(e){var t=e.classes,r=e.releaseDate;return"".concat(t.map((function(e){return e.name})).join(" / ")," Album - ").concat(r)},type:"album"},byArtist:{query:"searchAlbumByArtist(name: $title, limit: $limit, page: $page){ count, items: rows { id, title, classes { name }, releaseDate } }",title:"Albums (by artists)",subTitle:function(e){var t=e.classes,r=e.releaseDate;return"".concat(t.map((function(e){return e.name})).join(" / ")," Album - ").concat(r)},type:"album"},games:{query:"searchGame(name: $title, limit: $limit, page: $page){ count, items: rows { id: slug, title: name, releaseDate } }",title:"Games",subTitle:function(e){var t=e.releaseDate;return"Game - ".concat(t)},type:"game"},studios:{query:"searchStudio(name: $title, limit: $limit, page: $page){ count, items: rows { id: slug, title: name } }",title:"Studios",subTitle:function(){return"Studio"}},anims:{query:"searchAnimation(title: $title, limit: $limit, page: $page){ count, items: rows { id, title, releaseDate } }",title:"Animations",subTitle:function(e){var t=e.releaseDate;return"Animation - ".concat(t)},type:"anim"},series:{query:"searchSeries(name: $title, limit: $limit, page: $page){ count, items: rows { id: slug, title: name } }",title:"Series",subTitle:function(){return"Series"},type:"series"}},$={};function q(){var e=(0,a.useRouter)(),t=e.query.q,r=(0,c.Ps)(Z||(Z=(0,s.Z)(["\n  ","{\n    byTitle: ","\n    byArtist: ","\n    games: ","\n    studios: ","\n    anims: ","\n    series: ","\n  }\n  "])),D,T.byTitle.query,T.byArtist.query,T.games.query,T.studios.query,T.anims.query,T.series.query),m=(0,l.t)(r,{variables:{title:t,limit:_,page:0}}),d=(0,n.Z)(m,2),f=d[0],p=d[1],h=p.data,y=p.loading,b=(0,E.useState)($),A=b[0],j=b[1],g=function(e,t){return j(P(P({},A),{},(0,i.Z)({},e,t)))},x=y||Object.values(A).some((function(e){return e.loading}));return(0,E.useEffect)((function(){t&&f()}),[t]),(0,O.jsx)(u.Z,{className:"h-100 bg-dark",children:(0,O.jsxs)(o.Z,{className:"mx-5",children:[(0,O.jsx)(u.Z,{children:(0,O.jsx)(o.Z,{md:12,className:"my-1 px-4 py-3",style:{backgroundColor:"#33353e"},children:(0,O.jsxs)("h2",{className:"searchTitle",children:["Search Results for: ",e.query.q]})})}),x&&(0,O.jsx)(u.Z,{children:(0,O.jsx)(o.Z,{children:(0,O.jsx)(w,{className:"mx-auto my-2"})})}),h&&Object.entries(T).map((function(e){var r=(0,n.Z)(e,2),i=r[0],s=r[1];return T[i]&&(0,O.jsx)(k,P(P(P({search:t,category:i},s),h[i]),{},{setLoading:g}),i)}))]})})}function k(e){var t=e.count,r=e.title,i=e.subTitle,a=e.items,d=e.type,b=e.search,g=e.category,x=e.query,v=e.setLoading,w=(0,E.useState)(!1),Z=w[0],N=w[1],P=(0,E.useState)(a),T=P[0],$=P[1],q=(0,E.useState)(0),k=q[0],C=q[1],B=(0,E.useState)(t),z=B[0],X=B[1],G=(0,l.t)((0,c.Ps)(S||(S=(0,s.Z)(["\n      ","{\n        result: ","\n      }\n    "])),D,x),{onCompleted:function(e){v(g,!1),$(e.result.items)},onError:function(e){console.log(e),y.Am.error("Failed to fetch some results"),X(0)}}),H=(0,n.Z)(G,1)[0],M=k*_,R=M+_,V=z<R?z:R;return(0,E.useEffect)((function(){Z?(v(g,!0),H({variables:{title:b,limit:_,page:k}})):N(!0)}),[k]),z>0?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(u.Z,{className:"mb-1 mt-4",children:[(0,O.jsx)(o.Z,{md:"auto",children:(0,O.jsxs)("h2",{children:[r," (",z>_?"".concat(M+1," - ").concat(V):z,")"]})}),z>_&&(0,O.jsx)(o.Z,{md:"auto",children:(0,O.jsx)(m.Z,{children:Array.from(Array(Math.ceil(z/_)),(function(e,t){return(0,O.jsx)(m.Z.Link,{disabled:k===t,onClick:function(){return C(t)},className:"py-0 px-2",children:(0,O.jsx)("h2",{children:t+1})},t)}))})})]}),(0,O.jsx)(u.Z,{children:T.map((function(e){return(0,O.jsx)(h.default,{href:"/".concat(d,"/").concat(e.id),passHref:!0,children:(0,O.jsx)(o.Z,{md:6,children:(0,O.jsxs)(u.Z,{className:f()(A().result,"mx-1 d-flex flex-row mb-3"),children:[d&&(0,O.jsx)(o.Z,{md:"auto",className:f()(A().cover,"px-0"),children:(0,O.jsx)(p.default,{objectFit:"contain",alt:e.title,src:(0,j.J)(e.id,d),width:180,height:180})}),(0,O.jsxs)(o.Z,{className:"p-2 px-4 my-auto",children:[(0,O.jsx)("h2",{children:e.title}),(0,O.jsx)("p",{className:"card-text mt-2",children:i(e)})]})]})})},e.id)}))})]}):null}Object.keys(T).forEach((function(e){$[e]=!1}))},7508:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return r(3409)}])},8735:function(e){e.exports={result:"Search_result__1Ogoa",cover:"Search_cover__3L7zi",spin:"Search_spin__zx-j4"}}},function(e){e.O(0,[194,774,888,179],(function(){return t=7508,e(e.s=t);var t}));var t=e.O();_N_E=t}]);